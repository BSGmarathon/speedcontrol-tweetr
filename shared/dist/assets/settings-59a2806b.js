import{d as u,u as m,a as g,_ as c,c as i,w as s,V as f,o as r,i as n,e as d,f as w,j as C,g as V,h as k,v as T}from"./VTextField-817dad61.js";import{V as a}from"./VBtn-1e053d72.js";const b=u({setup(){m({title:"Tweetr settings"});const e=g("settings","speedcontrol-tweetr");if(!e)throw new Error("Missing settings");return{settingsReplicant:e}},data:()=>({importLoading:!1,exportLoading:!1}),computed:{settings(){return this.settingsReplicant.data?this.settingsReplicant.data:{autoTweet:!1,countdown:0}},countdownTime:{get(){return this.settings.countdown},set(e){this.settings.countdown=parseInt(e,10),this.settingsReplicant.save()}}},methods:{setAutotweet(e){this.settings.autoTweet=e,this.settingsReplicant.save()},startImportCSV(){this.$refs.importInput.click()},importCSV(){const{files:e}=this.$refs.importInput;if(!e||!e.length||!e[0].name.endsWith(".csv"))return;this.importLoading=!0;const t=new FileReader;t.readAsText(e[0]),t.onload=async()=>{const p=t.result;nodecg.sendMessage("importCSV",p.trim()),setTimeout(()=>{this.importLoading=!1},1e3)}},async exportCSV(){this.exportLoading=!0;const e=await nodecg.sendMessage("exportCSV"),t=document.createElement("a");t.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURIComponent(e)}`),t.setAttribute("download","tweetr_data.csv"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),this.exportLoading=!1}}});function v(e,t,p,h,S,I){return r(),i(f,null,{default:s(()=>[e.settings.autoTweet?(r(),i(a,{key:0,block:"",onClick:t[0]||(t[0]=o=>e.setAutotweet(!1)),color:"red-darken-4"},{default:s(()=>t[4]||(t[4]=[n("Disable Auto Tweet")])),_:1})):(r(),i(a,{key:1,block:"",onClick:t[1]||(t[1]=o=>e.setAutotweet(!0))},{default:s(()=>t[5]||(t[5]=[n("Enable Auto Tweet")])),_:1})),d(w,{type:"number",label:"Countdown Time",modelValue:e.countdownTime,"onUpdate:modelValue":t[2]||(t[2]=o=>e.countdownTime=o)},null,8,["modelValue"]),d(a,{block:"",onClick:e.startImportCSV,loading:e.importLoading},{default:s(()=>t[6]||(t[6]=[n("Import CSV")])),_:1},8,["onClick","loading"]),d(a,{block:"",onClick:e.exportCSV,loading:e.exportLoading},{default:s(()=>t[7]||(t[7]=[n("Export Tweets")])),_:1},8,["onClick","loading"]),C("input",{type:"file",accept:".csv",ref:"importInput",onChange:t[3]||(t[3]=(...o)=>e.importCSV&&e.importCSV(...o))},null,544)]),_:1})}const y=c(b,[["render",v],["__scopeId","data-v-5a2b99a4"]]),l=V(y),A=k();l.use(T);l.use(A);l.mount("#app");
